<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Habit Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Icons as inline SVGs
        const Activity = ({ className = "w-5 h-5" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
        );

        const Apple = ({ className = "w-5 h-5" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 14l9-5-9-5-9 5 9 5z" />
            </svg>
        );

        const Brain = ({ className = "w-5 h-5" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
        );

        const Heart = ({ className = "w-5 h-5" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
        );

        const Check = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
            </svg>
        );

        const WeeklyHabitTracker = () => {
            const [currentPage, setCurrentPage] = useState('exercise');

            function getWeekStart(date) {
                const d = new Date(date);
                const day = d.getDay();
                const diff = d.getDate() - day + (day === 0 ? -6 : 1);
                return new Date(d.setDate(diff));
            }

            const [currentWeek] = useState(getWeekStart(new Date()));

            // Workout plans
            const workoutPlans = {
                'Back-Gym': {
                    calories: 120,
                    exercises: [
                        '30/side Bicycles', 'Chin-ups - 18', 'Chin-ups - 16', 'Chin-ups - 16', 
                        'Knee tucks - 30', 'Shoulder blade - 20 lb', 'Shoulder blade - 20 lb',
                        'Bicep - 20 curls - 7.5lb', 'Bicep - 20 curls - 7.5lb', 'Cobra hold - 1 min',
                        'Back bend - 1 min', 'Leg lifts - 15', 'Hang', 'Wall Hand Stand'
                    ]
                },
                'Chest-Gym': {
                    calories: 130,
                    exercises: [
                        '30/side Bicycles', 'Incline pushups - 18', 'Incline pushups - 16', 'Incline pushups - 16',
                        'Knee tucks - 30', 'Bench - Side lift 15', 'Bench - Side lift 15', 'Bench - Push up 15',
                        'Bench - Push up 15', 'Bench - Overhead 15', 'Bench - Overhead 15', 'Cobra hold - 1 min',
                        'Back bend - 1 min', 'Leg lifts - 15', 'Wall Hand Stand'
                    ]
                },
                'Shoulders-Gym': {
                    calories: 140,
                    exercises: [
                        '30/side Bicycles', 'Squat/Side - 10 lb', 'Squat/Side - 10 lb', 'Knee tucks - 30',
                        'Squat/Front - 10 lb', 'Squat/Front - 10 lb', 'Squat/Overhead - 10 lb', 'Squat/Overhead - 11',
                        'Cobra hold - 1 min', 'Back bend - 1 min', 'Hamstrings - 25', 'Hamstrings - 25',
                        'Leg lifts - 15', 'Hang'
                    ]
                },
                'Core': {
                    calories: 110,
                    exercises: [
                        'Sprint', '20 Pilates swimmer', '30/side Bicycles', '20 Pilates swimmer',
                        '30/side Bicycles', 'Knee tucks', 'Back bend - 1 min', 'Leg lifts - 15',
                        'Plank - 45 sec', 'Plank - 45 sec', 'Side plank - 30 sec', 'Side plank - 30 sec',
                        'On side lift leg - 20', 'On side lift leg - 20'
                    ]
                },
                'Butt': {
                    calories: 125,
                    exercises: [
                        '30/side Bicycles', 'Fire Hydrant 1 min/ea', 'Fire Hydrant 1 min/ea', '30/side Bicycles',
                        'Back bend pushups 5+', 'Back bend pushups 5+', 'Back bend pushups 5+', 'Leg lifts - 15',
                        'Lateral Cross 1 min/ea', 'Lateral Cross 1 min/ea', 'Plank - 45 sec', 'On side lift leg - 20',
                        'On side lift leg - 20', 'On side lift leg - 20'
                    ]
                }
            };

            // Initialize exercise data
            const [exerciseData, setExerciseData] = useState(() => {
                const data = {};
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                const workoutSchedule = {
                    'Monday': workoutPlans['Back-Gym'],
                    'Tuesday': workoutPlans['Core'],
                    'Wednesday': workoutPlans['Butt'],
                    'Thursday': workoutPlans['Chest-Gym'],
                    'Friday': workoutPlans['Shoulders-Gym'],
                    'Saturday': null,
                    'Sunday': null
                };

                const allAdditionalActivities = [
                    { id: 'sprint', name: '5-10 Sprints', calories: 35, completed: false },
                    { id: 'hike', name: 'Hiking (1-1.5 hrs)', calories: 270, completed: false },
                    { id: 'sup', name: 'Stand-up Paddle', calories: 200, completed: false },
                    { id: 'swim', name: 'Swimming/Snorkeling', calories: 175, completed: false }
                ];
                
                days.forEach(day => {
                    const workoutPlan = workoutSchedule[day];
                    
                    data[day] = {
                        workout: workoutPlan ? {
                            type: workoutPlan.type,
                            calories: workoutPlan.calories,
                            exercises: workoutPlan.exercises.map((exercise, index) => ({
                                id: `${day}-${index}`,
                                name: exercise,
                                completed: false
                            }))
                        } : null,
                        additionalActivities: allAdditionalActivities.map(activity => ({
                            ...activity,
                            id: `${day}-${activity.id}`,
                            completed: false
                        })),
                        steps: { target: 5000, current: 0, completed: false, calories: 170 }
                    };
                });

                return data;
            });

            // Initialize nutrition data
            const [nutritionData, setNutritionData] = useState(() => {
                const data = {};
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                const dailyNutritionPlan = [
                    { id: 'coffee', name: 'Early morning coffee + heavy cream', completed: false },
                    { id: 'prewater', name: '24 oz salted water before workout', completed: false },
                    { id: 'acv', name: 'After workout: Wait 20 min → 1-2 tsp ACV in water, wait 20 min', completed: false },
                    { id: 'breakfast', name: 'Breakfast: 1 cup bone broth before 2 eggs + greens', completed: false },
                    { id: 'midwater', name: 'Mid morning: 16 oz salted water, wait 20 minutes', completed: false },
                    { id: 'matcha', name: 'Mid-morning: Unsweetened matcha tea', completed: false },
                    { id: 'lunch', name: 'Lunch: Bitters → sardines/salmon + capers, cooled starch, raw onions, cinnamon', completed: false },
                    { id: 'snack', name: 'Snack: Dandelion tea + turmeric/ginger tea before nuts', completed: false },
                    { id: 'dinner', name: 'Dinner: Bitters before dinner', completed: false },
                    { id: 'cutoff', name: 'No food or water after 6pm', completed: false }
                ];

                days.forEach(day => {
                    data[day] = {
                        metrics: {
                            fastingGlucose: '',
                            ketones: '',
                            totalCalories: '',
                            netCarbs: ''
                        },
                        meals: dailyNutritionPlan.map(meal => ({
                            ...meal,
                            id: `${day}-${meal.id}`,
                            completed: false
                        }))
                    };
                });

                return data;
            });

            // Initialize self care data
            const [selfCareData, setSelfCareData] = useState(() => {
                const data = {};
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                const dailySelfCarePlan = [
                    { id: 'drybrush', name: 'Early morning: Dry brush', category: 'morning', completed: false },
                    { id: 'swish', name: 'Early morning: Coconut swish with baking soda rinse', category: 'morning', completed: false },
                    { id: 'morningbreath', name: 'Early morning: Breathing or Ohm\'s - 10 minutes', category: 'morning', completed: false },
                    { id: 'coldshower', name: 'After workout: Cold shower', category: 'postworkout', completed: false },
                    { id: 'meditation1', name: 'After workout: Meditation', category: 'postworkout', completed: false },
                    { id: 'internet', name: 'Evening: 8pm turn off internet & cell phone', category: 'evening', completed: false },
                    { id: 'magnesium', name: 'Evening: Take magnesium', category: 'evening', completed: false },
                    { id: 'eveningbreath', name: 'Evening: Breathing or Ohm\'s - 10 minutes', category: 'evening', completed: false },
                    { id: 'meditation2', name: 'Evening: Meditation', category: 'evening', completed: false },
                    { id: 'ceci', name: 'Evening: Brush Ceci\'s teeth', category: 'evening', completed: false },
                    { id: 'read', name: 'Evening: Read', category: 'evening', completed: false },
                    { id: 'castor', name: 'Evening: Castor oil on belly button', category: 'evening', completed: false }
                ];

                days.forEach(day => {
                    data[day] = {
                        activities: dailySelfCarePlan.map(activity => ({
                            ...activity,
                            id: `${day}-${activity.id}`,
                            completed: false
                        }))
                    };
                });

                return data;
            });

            // Initialize meditation data
            const [meditationData, setMeditationData] = useState(() => {
                const data = {};
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                
                days.forEach(day => {
                    data[day] = {
                        morningMinutes: '',
                        eveningMinutes: ''
                    };
                });

                return data;
            });

            const pages = [
                { id: 'exercise', name: 'Exercise', icon: Activity },
                { id: 'nutrition', name: 'Nutrition', icon: Apple },
                { id: 'meditation', name: 'Meditation', icon: Brain },
                { id: 'selfcare', name: 'Self Care', icon: Heart }
            ];

            // Exercise functions
            const toggleExercise = (day, exerciseId) => {
                setExerciseData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        workout: {
                            ...prev[day].workout,
                            exercises: prev[day].workout.exercises.map(exercise =>
                                exercise.id === exerciseId 
                                    ? { ...exercise, completed: !exercise.completed }
                                    : exercise
                            )
                        }
                    }
                }));
            };

            const toggleActivity = (day, activityId) => {
                setExerciseData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        additionalActivities: prev[day].additionalActivities.map(activity =>
                            activity.id === activityId 
                                ? { ...activity, completed: !activity.completed }
                                : activity
                        )
                    }
                }));
            };

            const updateSteps = (day, steps) => {
                const current = parseInt(steps) || 0;
                setExerciseData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        steps: {
                            ...prev[day].steps,
                            current,
                            completed: current >= prev[day].steps.target
                        }
                    }
                }));
            };

            // Nutrition functions
            const toggleNutritionItem = (day, mealId) => {
                setNutritionData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        meals: prev[day].meals.map(meal =>
                            meal.id === mealId 
                                ? { ...meal, completed: !meal.completed }
                                : meal
                        )
                    }
                }));
            };

            const updateNutritionMetric = (day, metric, value) => {
                setNutritionData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        metrics: {
                            ...prev[day].metrics,
                            [metric]: value
                        }
                    }
                }));
            };

            // Self care functions
            const toggleSelfCareItem = (day, activityId) => {
                setSelfCareData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        activities: prev[day].activities.map(activity =>
                            activity.id === activityId 
                                ? { ...activity, completed: !activity.completed }
                                : activity
                        )
                    }
                }));
            };

            // Meditation functions
            const updateMeditationMinutes = (day, period, minutes) => {
                setMeditationData(prev => ({
                    ...prev,
                    [day]: {
                        ...prev[day],
                        [period]: minutes
                    }
                }));
            };

            // Progress calculations
            const getWeeklyProgress = () => {
                const days = Object.keys(exerciseData);
                let totalItems = 0;
                let completedItems = 0;
                let totalCalories = 0;
                let burnedCalories = 0;

                days.forEach(day => {
                    const dayData = exerciseData[day];
                    
                    if (dayData.workout) {
                        totalItems += dayData.workout.exercises.length;
                        completedItems += dayData.workout.exercises.filter(ex => ex.completed).length;
                        totalCalories += dayData.workout.calories;
                        if (dayData.workout.exercises.every(ex => ex.completed)) {
                            burnedCalories += dayData.workout.calories;
                        }
                    }
                    
                    dayData.additionalActivities.forEach(activity => {
                        totalItems += 1;
                        totalCalories += activity.calories;
                        if (activity.completed) {
                            completedItems += 1;
                            burnedCalories += activity.calories;
                        }
                    });
                    
                    totalItems += 1;
                    totalCalories += dayData.steps.calories;
                    if (dayData.steps.completed) {
                        completedItems += 1;
                        burnedCalories += dayData.steps.calories;
                    }
                });

                return {
                    completed: completedItems,
                    total: totalItems,
                    percentage: totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0,
                    totalCalories,
                    burnedCalories
                };
            };

            const getNutritionWeeklyProgress = () => {
                const days = Object.keys(nutritionData);
                let totalItems = 0;
                let completedItems = 0;

                days.forEach(day => {
                    const dayData = nutritionData[day];
                    
                    totalItems += dayData.meals.length;
                    completedItems += dayData.meals.filter(meal => meal.completed).length;
                    
                    const filledMetrics = Object.values(dayData.metrics).filter(value => value && value.trim() !== '').length;
                    totalItems += 4;
                    completedItems += filledMetrics;
                });

                return {
                    completed: completedItems,
                    total: totalItems,
                    percentage: totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0
                };
            };

            const getSelfCareWeeklyProgress = () => {
                const days = Object.keys(selfCareData);
                let totalItems = 0;
                let completedItems = 0;

                days.forEach(day => {
                    const dayData = selfCareData[day];
                    totalItems += dayData.activities.length;
                    completedItems += dayData.activities.filter(activity => activity.completed).length;
                });

                return {
                    completed: completedItems,
                    total: totalItems,
                    percentage: totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0
                };
            };

            const getMeditationWeeklyProgress = () => {
                const days = Object.keys(meditationData);
                let totalMorningMinutes = 0;
                let totalEveningMinutes = 0;
                let totalMinutes = 0;
                let sessionsLogged = 0;
                let totalSessions = 0;

                days.forEach(day => {
                    const dayData = meditationData[day];
                    const morningMins = parseInt(dayData.morningMinutes) || 0;
                    const eveningMins = parseInt(dayData.eveningMinutes) || 0;
                    
                    totalMorningMinutes += morningMins;
                    totalEveningMinutes += eveningMins;
                    totalMinutes += morningMins + eveningMins;
                    
                    if (morningMins > 0) sessionsLogged++;
                    if (eveningMins > 0) sessionsLogged++;
                    totalSessions += 2;
                });

                return {
                    totalMinutes,
                    totalMorningMinutes,
                    totalEveningMinutes,
                    sessionsLogged,
                    totalSessions,
                    sessionPercentage: totalSessions > 0 ? Math.round((sessionsLogged / totalSessions) * 100) : 0
                };
            };

            // Render functions
            const renderExercisePage = () => {
                const weekProgress = getWeeklyProgress();
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

                return (
                    <div className="space-y-6">
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-2xl font-semibold text-gray-800">Weekly Exercise Progress</h2>
                                <div className="text-sm text-gray-500">
                                    Week of {currentWeek.toLocaleDateString()}
                                </div>
                            </div>
                            
                            <div className="w-full bg-gray-200 rounded-full h-4 mb-4">
                                <div 
                                    className="bg-gradient-to-r from-blue-400 to-green-500 h-4 rounded-full transition-all duration-300"
                                    style={{ width: `${weekProgress.percentage}%` }}
                                ></div>
                            </div>
                            
                            <div className="text-center">
                                <span className="text-3xl font-bold text-gray-800">{weekProgress.percentage}%</span>
                                <p className="text-gray-600">{weekProgress.completed}/{weekProgress.total} activities completed</p>
                                <div className="mt-4 p-4 bg-gradient-to-r from-orange-100 to-red-100 rounded-lg">
                                    <p className="text-lg font-semibold text-gray-800">Calories Burned: {weekProgress.burnedCalories}</p>
                                    <p className="text-sm text-gray-600">Potential: {weekProgress.totalCalories} calories</p>
                                </div>
                            </div>
                        </div>

                        <div className="grid gap-4">
                            {days.map(day => {
                                const dayData = exerciseData[day];
                                const isWeekend = ['Saturday', 'Sunday'].includes(day);
                                
                                return (
                                    <div key={day} className="bg-white rounded-xl shadow-lg overflow-hidden">
                                        <div className={`p-4 ${isWeekend ? 'bg-orange-500' : 'bg-blue-500'}`}>
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h3 className="text-xl font-semibold text-white">{day}</h3>
                                                    {dayData.workout && (
                                                        <p className="text-blue-100">{dayData.workout.type} Workout</p>
                                                    )}
                                                    {!dayData.workout && !isWeekend && (
                                                        <p className="text-blue-100">Rest Day - Choose Activities</p>
                                                    )}
                                                </div>
                                                {dayData.workout && (
                                                    <div className="text-right">
                                                        <span className="text-white bg-white bg-opacity-20 px-2 py-1 rounded text-sm">
                                                            {dayData.workout.calories} cal
                                                        </span>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                        
                                        <div className="p-4 space-y-4">
                                            {/* Workout Exercises */}
                                            {dayData.workout && (
                                                <div>
                                                    <h4 className="font-medium text-gray-800 mb-2">Workout Exercises</h4>
                                                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-2">
                                                        {dayData.workout.exercises.map(exercise => (
                                                            <div
                                                                key={exercise.id}
                                                                className={`flex items-center p-2 rounded border ${
                                                                    exercise.completed ? 'bg-green-50 border-green-300' : 'bg-gray-50 border-gray-200'
                                                                }`}
                                                            >
                                                                <button
                                                                    onClick={() => toggleExercise(day, exercise.id)}
                                                                    className={`w-5 h-5 rounded border-2 flex items-center justify-center mr-3 ${
                                                                        exercise.completed 
                                                                            ? 'border-green-500 bg-green-500 text-white' 
                                                                            : 'border-gray-300'
                                                                    }`}
                                                                >
                                                                    {exercise.completed && <Check className="w-3 h-3" />}
                                                                </button>
                                                                <span className={`text-sm ${exercise.completed ? 'line-through text-gray-500' : ''}`}>
                                                                    {exercise.name}
                                                                </span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}

                                            {/* Additional Activities */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-2">Additional Activities (Choose Based on Weather/Energy)</h4>
                                                {dayData.additionalActivities.map(activity => (
                                                    <div
                                                        key={activity.id}
                                                        className={`flex items-center p-3 rounded border mb-2 ${
                                                            activity.completed ? 'bg-green-50 border-green-300' : 'bg-gray-50 border-gray-200'
                                                        }`}
                                                    >
                                                        <button
                                                            onClick={() => toggleActivity(day, activity.id)}
                                                            className={`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 ${
                                                                activity.completed 
                                                                    ? 'border-green-500 bg-green-500 text-white' 
                                                                    : 'border-gray-300'
                                                            }`}
                                                        >
                                                            {activity.completed && <Check className="w-4 h-4" />}
                                                        </button>
                                                        <span className={`${activity.completed ? 'line-through text-gray-500' : ''}`}>
                                                            {activity.name}
                                                        </span>
                                                        <span className="ml-2 text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded">
                                                            {activity.calories} cal
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>

                                            {/* Steps Tracker */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-2">Steps Goal</h4>
                                                <div className="flex items-center space-x-3">
                                                    <input
                                                        type="number"
                                                        value={dayData.steps.current}
                                                        onChange={(e) => updateSteps(day, e.target.value)}
                                                        placeholder="0"
                                                        className="w-24 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                    />
                                                    <span className="text-gray-600">/ {dayData.steps.target} steps</span>
                                                    <span className="ml-2 text-xs bg-green-100 text-green-600 px-2 py-1 rounded">
                                                        {dayData.steps.calories} cal
                                                    </span>
                                                    <div className={`w-4 h-4 rounded-full ${dayData.steps.completed ? 'bg-green-500' : 'bg-gray-300'}`}></div>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-2 mt-2">
                                                    <div 
                                                        className="bg-blue-500 h-2 rounded-full transition-all"
                                                        style={{ width: `${Math.min(100, (dayData.steps.current / dayData.steps.target) * 100)}%` }}
                                                    ></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const renderNutritionPage = () => {
                const weekProgress = getNutritionWeeklyProgress();
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

                return (
                    <div className="space-y-6">
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-2xl font-semibold text-gray-800">Weekly Nutrition Progress</h2>
                                <div className="text-sm text-gray-500">
                                    Week of {currentWeek.toLocaleDateString()}
                                </div>
                            </div>
                            
                            <div className="w-full bg-gray-200 rounded-full h-4 mb-4">
                                <div 
                                    className="bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full transition-all duration-300"
                                    style={{ width: `${weekProgress.percentage}%` }}
                                ></div>
                            </div>
                            
                            <div className="text-center">
                                <span className="text-3xl font-bold text-gray-800">{weekProgress.percentage}%</span>
                                <p className="text-gray-600">{weekProgress.completed}/{weekProgress.total} nutrition items completed</p>
                            </div>
                        </div>

                        <div className="grid gap-4">
                            {days.map(day => {
                                const dayData = nutritionData[day];
                                
                                return (
                                    <div key={day} className="bg-white rounded-xl shadow-lg overflow-hidden">
                                        <div className="p-4 bg-green-500">
                                            <h3 className="text-xl font-semibold text-white">{day}</h3>
                                            <p className="text-green-100">Nutrition & Meal Plan</p>
                                        </div>
                                        
                                        <div className="p-4 space-y-6">
                                            {/* Daily Metrics */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-3">Daily Metrics (KetoMojo & CarbManager)</h4>
                                                <div className="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-600 mb-1">
                                                            Fasting Blood Glucose
                                                        </label>
                                                        <input
                                                            type="number"
                                                            step="0.1"
                                                            placeholder="0.0"
                                                            value={dayData.metrics.fastingGlucose}
                                                            onChange={(e) => updateNutritionMetric(day, 'fastingGlucose', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-center"
                                                        />
                                                        <span className="text-xs text-gray-500">mg/dL</span>
                                                    </div>
                                                    
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-600 mb-1">
                                                            Ketones
                                                        </label>
                                                        <input
                                                            type="number"
                                                            step="0.1"
                                                            placeholder="0.0"
                                                            value={dayData.metrics.ketones}
                                                            onChange={(e) => updateNutritionMetric(day, 'ketones', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-center"
                                                        />
                                                        <span className="text-xs text-gray-500">mmol/L</span>
                                                    </div>
                                                    
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-600 mb-1">
                                                            Total Calories
                                                        </label>
                                                        <input
                                                            type="number"
                                                            placeholder="0"
                                                            value={dayData.metrics.totalCalories}
                                                            onChange={(e) => updateNutritionMetric(day, 'totalCalories', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-center"
                                                        />
                                                        <span className="text-xs text-gray-500">calories</span>
                                                    </div>
                                                    
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-600 mb-1">
                                                            Net Carbs
                                                        </label>
                                                        <input
                                                            type="number"
                                                            placeholder="0"
                                                            value={dayData.metrics.netCarbs}
                                                            onChange={(e) => updateNutritionMetric(day, 'netCarbs', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 text-center"
                                                        />
                                                        <span className="text-xs text-gray-500">grams</span>
                                                    </div>
                                                </div>
                                            </div>

                                            {/* Daily Meal Plan */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-3">Daily Meal Plan</h4>
                                                <div className="space-y-2">
                                                    {dayData.meals.map(meal => (
                                                        <div
                                                            key={meal.id}
                                                            className={`flex items-start p-3 rounded border ${
                                                                meal.completed ? 'bg-green-50 border-green-300' : 'bg-gray-50 border-gray-200'
                                                            }`}
                                                        >
                                                            <button
                                                                onClick={() => toggleNutritionItem(day, meal.id)}
                                                                className={`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0 ${
                                                                    meal.completed 
                                                                        ? 'border-green-500 bg-green-500 text-white' 
                                                                        : 'border-gray-300'
                                                                }`}
                                                            >
                                                                {meal.completed && <Check className="w-4 h-4" />}
                                                            </button>
                                                            <span className={`${meal.completed ? 'line-through text-gray-500' : ''}`}>
                                                                {meal.name}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const renderSelfCarePage = () => {
                const weekProgress = getSelfCareWeeklyProgress();
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

                return (
                    <div className="space-y-6">
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-2xl font-semibold text-gray-800">Weekly Self Care Progress</h2>
                                <div className="text-sm text-gray-500">
                                    Week of {currentWeek.toLocaleDateString()}
                                </div>
                            </div>
                            
                            <div className="w-full bg-gray-200 rounded-full h-4 mb-4">
                                <div 
                                    className="bg-gradient-to-r from-purple-400 to-pink-500 h-4 rounded-full transition-all duration-300"
                                    style={{ width: `${weekProgress.percentage}%` }}
                                ></div>
                            </div>
                            
                            <div className="text-center">
                                <span className="text-3xl font-bold text-gray-800">{weekProgress.percentage}%</span>
                                <p className="text-gray-600">{weekProgress.completed}/{weekProgress.total} self care activities completed</p>
                            </div>
                        </div>

                        <div className="grid gap-4">
                            {days.map(day => {
                                const dayData = selfCareData[day];
                                
                                const morningActivities = dayData.activities.filter(a => a.category === 'morning');
                                const postWorkoutActivities = dayData.activities.filter(a => a.category === 'postworkout');
                                const eveningActivities = dayData.activities.filter(a => a.category === 'evening');
                                
                                return (
                                    <div key={day} className="bg-white rounded-xl shadow-lg overflow-hidden">
                                        <div className="p-4 bg-purple-500">
                                            <h3 className="text-xl font-semibold text-white">{day}</h3>
                                            <p className="text-purple-100">Self Care & Wellness</p>
                                        </div>
                                        
                                        <div className="p-4 space-y-6">
                                            {/* Early Morning Activities */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-3 flex items-center">
                                                    <div className="w-3 h-3 bg-yellow-400 rounded-full mr-2"></div>
                                                    Early Morning
                                                </h4>
                                                <div className="space-y-2">
                                                    {morningActivities.map(activity => (
                                                        <div
                                                            key={activity.id}
                                                            className={`flex items-start p-3 rounded border ${
                                                                activity.completed ? 'bg-purple-50 border-purple-300' : 'bg-gray-50 border-gray-200'
                                                            }`}
                                                        >
                                                            <button
                                                                onClick={() => toggleSelfCareItem(day, activity.id)}
                                                                className={`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0 ${
                                                                    activity.completed 
                                                                        ? 'border-purple-500 bg-purple-500 text-white' 
                                                                        : 'border-gray-300'
                                                                }`}
                                                            >
                                                                {activity.completed && <Check className="w-4 h-4" />}
                                                            </button>
                                                            <span className={`${activity.completed ? 'line-through text-gray-500' : ''}`}>
                                                                {activity.name}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            {/* Post Workout Activities */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-3 flex items-center">
                                                    <div className="w-3 h-3 bg-blue-400 rounded-full mr-2"></div>
                                                    After Workout
                                                </h4>
                                                <div className="space-y-2">
                                                    {postWorkoutActivities.map(activity => (
                                                        <div
                                                            key={activity.id}
                                                            className={`flex items-start p-3 rounded border ${
                                                                activity.completed ? 'bg-purple-50 border-purple-300' : 'bg-gray-50 border-gray-200'
                                                            }`}
                                                        >
                                                            <button
                                                                onClick={() => toggleSelfCareItem(day, activity.id)}
                                                                className={`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0 ${
                                                                    activity.completed 
                                                                        ? 'border-purple-500 bg-purple-500 text-white' 
                                                                        : 'border-gray-300'
                                                                }`}
                                                            >
                                                                {activity.completed && <Check className="w-4 h-4" />}
                                                            </button>
                                                            <span className={`${activity.completed ? 'line-through text-gray-500' : ''}`}>
                                                                {activity.name}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>

                                            {/* Evening Activities */}
                                            <div>
                                                <h4 className="font-medium text-gray-800 mb-3 flex items-center">
                                                    <div className="w-3 h-3 bg-indigo-400 rounded-full mr-2"></div>
                                                    Evening Routine
                                                </h4>
                                                <div className="space-y-2">
                                                    {eveningActivities.map(activity => (
                                                        <div
                                                            key={activity.id}
                                                            className={`flex items-start p-3 rounded border ${
                                                                activity.completed ? 'bg-purple-50 border-purple-300' : 'bg-gray-50 border-gray-200'
                                                            }`}
                                                        >
                                                            <button
                                                                onClick={() => toggleSelfCareItem(day, activity.id)}
                                                                className={`w-6 h-6 rounded border-2 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0 ${
                                                                    activity.completed 
                                                                        ? 'border-purple-500 bg-purple-500 text-white' 
                                                                        : 'border-gray-300'
                                                                }`}
                                                            >
                                                                {activity.completed && <Check className="w-4 h-4" />}
                                                            </button>
                                                            <span className={`${activity.completed ? 'line-through text-gray-500' : ''}`}>
                                                                {activity.name}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const renderMeditationPage = () => {
                const weekProgress = getMeditationWeeklyProgress();
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

                return (
                    <div className="space-y-6">
                        <div className="bg-white rounded-xl shadow-lg p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h2 className="text-2xl font-semibold text-gray-800">Weekly Meditation Progress</h2>
                                <div className="text-sm text-gray-500">
                                    Week of {currentWeek.toLocaleDateString()}
                                </div>
                            </div>
                            
                            <div className="w-full bg-gray-200 rounded-full h-4 mb-4">
                                <div 
                                    className="bg-gradient-to-r from-indigo-400 to-purple-500 h-4 rounded-full transition-all duration-300"
                                    style={{ width: `${weekProgress.sessionPercentage}%` }}
                                ></div>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                                <div className="text-center p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg">
                                    <span className="text-3xl font-bold text-indigo-600">{weekProgress.totalMinutes}</span>
                                    <p className="text-gray-600">Total Minutes</p>
                                </div>
                                <div className="text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg">
                                    <span className="text-3xl font-bold text-blue-600">{weekProgress.sessionsLogged}</span>
                                    <p className="text-gray-600">Sessions Logged</p>
                                </div>
                                <div className="text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg">
                                    <span className="text-3xl font-bold text-purple-600">{weekProgress.sessionPercentage}%</span>
                                    <p className="text-gray-600">Session Completion</p>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div className="text-center p-3 bg-yellow-50 rounded-lg">
                                    <span className="text-xl font-semibold text-yellow-600">{weekProgress.totalMorningMinutes} min</span>
                                    <p className="text-sm text-gray-600">Morning Meditation</p>
                                </div>
                                <div className="text-center p-3 bg-indigo-50 rounded-lg">
                                    <span className="text-xl font-semibold text-indigo-600">{weekProgress.totalEveningMinutes} min</span>
                                    <p className="text-sm text-gray-600">Evening Meditation</p>
                                </div>
                            </div>
                        </div>

                        <div className="grid gap-4">
                            {days.map(day => {
                                const dayData = meditationData[day];
                                const dailyTotal = (parseInt(dayData.morningMinutes) || 0) + (parseInt(dayData.eveningMinutes) || 0);
                                
                                return (
                                    <div key={day} className="bg-white rounded-xl shadow-lg overflow-hidden">
                                        <div className="p-4 bg-indigo-500">
                                            <div className="flex justify-between items-center">
                                                <div>
                                                    <h3 className="text-xl font-semibold text-white">{day}</h3>
                                                    <p className="text-indigo-100">Meditation Practice</p>
                                                </div>
                                                <div className="text-right">
                                                    <span className="text-white bg-white bg-opacity-20 px-3 py-1 rounded text-sm">
                                                        {dailyTotal} min total
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="p-6">
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                {/* Morning Meditation */}
                                                <div className="space-y-3">
                                                    <div className="flex items-center">
                                                        <div className="w-3 h-3 bg-yellow-400 rounded-full mr-2"></div>
                                                        <h4 className="font-medium text-gray-800">Morning Meditation</h4>
                                                    </div>
                                                    <div className="flex items-center space-x-3">
                                                        <input
                                                            type="number"
                                                            min="0"
                                                            placeholder="0"
                                                            value={dayData.morningMinutes}
                                                            onChange={(e) => updateMeditationMinutes(day, 'morningMinutes', e.target.value)}
                                                            className="w-20 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center"
                                                        />
                                                        <span className="text-gray-600">minutes</span>
                                                        <div className={`w-4 h-4 rounded-full ${dayData.morningMinutes && parseInt(dayData.morningMinutes) > 0 ? 'bg-yellow-500' : 'bg-gray-300'}`}></div>
                                                    </div>
                                                </div>

                                                {/* Evening Meditation */}
                                                <div className="space-y-3">
                                                    <div className="flex items-center">
                                                        <div className="w-3 h-3 bg-indigo-400 rounded-full mr-2"></div>
                                                        <h4 className="font-medium text-gray-800">Evening Meditation</h4>
                                                    </div>
                                                    <div className="flex items-center space-x-3">
                                                        <input
                                                            type="number"
                                                            min="0"
                                                            placeholder="0"
                                                            value={dayData.eveningMinutes}
                                                            onChange={(e) => updateMeditationMinutes(day, 'eveningMinutes', e.target.value)}
                                                            className="w-20 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center"
                                                        />
                                                        <span className="text-gray-600">minutes</span>
                                                        <div className={`w-4 h-4 rounded-full ${dayData.eveningMinutes && parseInt(dayData.eveningMinutes) > 0 ? 'bg-indigo-500' : 'bg-gray-300'}`}></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
                    {/* Navigation */}
                    <nav className="bg-white shadow-lg">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="flex justify-between items-center py-4">
                                <h1 className="text-2xl font-bold text-gray-800">Weekly Habit Tracker</h1>
                                <div className="flex space-x-4">
                                    {pages.map(page => {
                                        const Icon = page.icon;
                                        return (
                                            <button
                                                key={page.id}
                                                onClick={() => setCurrentPage(page.id)}
                                                className={`flex items-center px-4 py-2 rounded-lg transition-colors ${
                                                    currentPage === page.id 
                                                        ? 'bg-blue-500 text-white' 
                                                        : 'text-gray-600 hover:bg-gray-100'
                                                }`}
                                            >
                                                <Icon className="w-5 h-5 mr-2" />
                                                {page.name}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    </nav>

                    {/* Content */}
                    <div className="max-w-6xl mx-auto p-6">
                        {currentPage === 'exercise' && renderExercisePage()}
                        {currentPage === 'nutrition' && renderNutritionPage()}
                        {currentPage === 'meditation' && renderMeditationPage()}
                        {currentPage === 'selfcare' && renderSelfCarePage()}
                    </div>
                </div>
            );
        };

        ReactDOM.render(React.createElement(WeeklyHabitTracker), document.getElementById('root'));
    </script>
</body>
</html>
