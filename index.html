<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Habits</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f0f4f8; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        
        .header { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header h1 { color: #2d3748; margin-bottom: 10px; }
        
        .nav { display: flex; gap: 10px; margin-top: 15px; }
        .nav-btn { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.2s; }
        .nav-btn.active { background: #4299e1; color: white; }
        .nav-btn:not(.active) { background: #edf2f7; color: #4a5568; }
        .nav-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 8px rgba(0,0,0,0.12); }
        
        .page { display: none; }
        .page.active { display: block; }
        
        .progress-card { background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .progress-bar { width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; margin: 20px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #48bb78, #4299e1); transition: width 0.3s ease; }
        .stats { display: flex; justify-content: space-around; margin-top: 20px; }
        .stat { text-align: center; }
        .stat-number { font-size: 28px; font-weight: bold; color: #2d3748; }
        .stat-label { font-size: 14px; color: #718096; margin-top: 4px; }
        
        .day-card { background: white; margin-bottom: 20px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .day-header { padding: 16px 20px; font-weight: 600; color: white; font-size: 18px; }
        .day-content { padding: 20px; }
        
        .exercise-header { background: #4299e1; }
        .nutrition-header { background: #48bb78; }
        .meditation-header { background: #9f7aea; }
        .selfcare-header { background: #ed8936; }
        .weekend-header { background: #f56565; }
        
        .section { margin-bottom: 25px; }
        .section h4 { color: #2d3748; margin-bottom: 12px; font-weight: 600; }
        
        .item { display: flex; align-items: center; padding: 12px; margin-bottom: 8px; background: #f7fafc; border-radius: 8px; transition: all 0.2s; }
        .item:hover { background: #edf2f7; }
        .item.completed { background: #f0fff4; text-decoration: line-through; color: #68d391; }
        .item input[type="checkbox"] { margin-right: 12px; width: 18px; height: 18px; cursor: pointer; }
        
        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .metric input { width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px; text-align: center; }
        .metric label { display: block; margin-bottom: 6px; font-size: 12px; color: #718096; font-weight: 500; }
        
        .meditation-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .meditation-item { text-align: center; }
        .meditation-item input { width: 80px; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px; text-align: center; margin: 0 8px; }
        
        .emoji { font-size: 16px; margin-right: 8px; }
        
        .data-controls { background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .data-controls button { padding: 8px 16px; margin: 0 5px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; }
        .export-btn { background: #4299e1; color: white; }
        .import-btn { background: #48bb78; color: white; }
        .clear-btn { background: #f56565; color: white; }
        .data-controls input[type="file"] { margin: 0 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Power Habits</h1>
            <p>Simple tracking for exercise, nutrition, meditation, and self-care</p>
            <div class="nav">
                <button class="nav-btn active" onclick="showPage('exercise')">Exercise</button>
                <button class="nav-btn" onclick="showPage('nutrition')">Nutrition</button>
                <button class="nav-btn" onclick="showPage('meditation')">Meditation</button>
                <button class="nav-btn" onclick="showPage('selfcare')">Self Care</button>
            </div>
        </div>

        <div class="data-controls">
            <button class="export-btn" onclick="exportData()">üì• Export Data</button>
            <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData()">
            <button class="import-btn" onclick="document.getElementById('importFile').click()">üì§ Import Data</button>
            <button class="clear-btn" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
            <small style="color: #718096; margin-left: 20px;">Data is automatically saved in your browser</small>
        </div>

        <!-- Exercise Page -->
        <div id="exercise" class="page active">
            <div class="progress-card">
                <h2>Weekly Exercise Progress</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="exercise-progress" style="width: 0%"></div>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="exercise-completed">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="exercise-total">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="exercise-calories">0</div>
                        <div class="stat-label">Est. Calories</div>
                    </div>
                </div>
            </div>
            <div id="exercise-days"></div>
        </div>

        <!-- Nutrition Page -->
        <div id="nutrition" class="page">
            <div class="progress-card">
                <h2>Weekly Nutrition Progress</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="nutrition-progress" style="width: 0%"></div>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="nutrition-completed">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="nutrition-total">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                </div>
            </div>
            <div id="nutrition-days"></div>
        </div>

        <!-- Meditation Page -->
        <div id="meditation" class="page">
            <div class="progress-card">
                <h2>Weekly Meditation Progress</h2>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="total-minutes">0</div>
                        <div class="stat-label">Total Minutes</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="sessions-logged">0</div>
                        <div class="stat-label">Sessions</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="avg-session">0</div>
                        <div class="stat-label">Avg Minutes</div>
                    </div>
                </div>
            </div>
            <div id="meditation-days"></div>
        </div>

        <!-- Self Care Page -->
        <div id="selfcare" class="page">
            <div class="progress-card">
                <h2>Weekly Self Care Progress</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="selfcare-progress" style="width: 0%"></div>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-number" id="selfcare-completed">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number" id="selfcare-total">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                </div>
            </div>
            <div id="selfcare-days"></div>
        </div>
    </div>

    <script>
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        
        const workouts = {
            'Monday': { name: 'Back-Gym', calories: 120, exercises: ['30/side Bicycles', 'Chin-ups - 18', 'Chin-ups - 16', 'Knee tucks - 30', 'Shoulder blade - 20 lb', 'Bicep - 20 curls - 7.5lb', 'Cobra hold - 1 min', 'Back bend - 1 min', 'Leg lifts - 15', 'Hang', 'Wall Hand Stand'] },
            'Tuesday': { name: 'Core', calories: 110, exercises: ['Sprint', '20 Pilates swimmer', '30/side Bicycles', 'Knee tucks', 'Back bend - 1 min', 'Leg lifts - 15', 'Plank - 45 sec', 'Side plank - 30 sec', 'On side lift leg - 20'] },
            'Wednesday': { name: 'Butt', calories: 125, exercises: ['30/side Bicycles', 'Fire Hydrant 1 min/ea', 'Back bend pushups 5+', 'Leg lifts - 15', 'Lateral Cross 1 min/ea', 'Plank - 45 sec', 'On side lift leg - 20'] },
            'Thursday': { name: 'Chest-Gym', calories: 130, exercises: ['30/side Bicycles', 'Incline pushups - 18', 'Knee tucks - 30', 'Bench - Side lift 15', 'Bench - Push up 15', 'Bench - Overhead 15', 'Cobra hold - 1 min', 'Back bend - 1 min', 'Leg lifts - 15'] },
            'Friday': { name: 'Shoulders-Gym', calories: 140, exercises: ['30/side Bicycles', 'Squat/Side - 10 lb', 'Knee tucks - 30', 'Squat/Front - 10 lb', 'Squat/Overhead - 10 lb', 'Cobra hold - 1 min', 'Back bend - 1 min', 'Hamstrings - 25', 'Leg lifts - 15'] }
        };
        
        const activities = ['5-10 Sprints (35 cal)', 'Hiking 1-1.5 hrs (270 cal)', 'Stand-up Paddle (200 cal)', 'Swimming/Snorkeling (175 cal)'];
        
        const meals = [
            'Early morning coffee + heavy cream',
            '24 oz salted water before workout', 
            'After workout: Wait 20 min ‚Üí 1-2 tsp ACV in water, wait 20 min',
            'Breakfast: 1 cup bone broth before 2 eggs + greens',
            'Mid morning: 16 oz salted water, wait 20 minutes',
            'Mid-morning: Unsweetened matcha tea',
            'Lunch: Bitters ‚Üí sardines/salmon + capers, cooled starch, raw onions, cinnamon',
            'Snack: Dandelion tea + turmeric/ginger tea before nuts',
            'Dinner: Bitters before dinner',
            'No food or water after 6pm'
        ];
        
        const selfCareActivities = [
            { category: 'morning', emoji: 'üåÖ', items: ['Dry brush', 'Coconut swish with baking soda rinse', 'Breathing or Ohm\'s - 10 minutes'] },
            { category: 'postworkout', emoji: 'üí™', items: ['Cold shower', 'Meditation'] },
            { category: 'evening', emoji: 'üåô', items: ['8pm turn off internet & cell phone', 'Take magnesium', 'Breathing or Ohm\'s - 10 minutes', 'Meditation', 'Brush Ceci\'s teeth', 'Read', 'Castor oil on belly button'] }
        ];

        // Data storage functions
        function saveData() {
            const data = {
                checkboxes: {},
                inputs: {},
                timestamp: Date.now()
            };
            
            // Save checkbox states
            document.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                data.checkboxes[`checkbox_${index}`] = checkbox.checked;
            });
            
            // Save input values
            document.querySelectorAll('input[type="number"]').forEach((input, index) => {
                data.inputs[`input_${index}`] = input.value;
            });
            
            // Use a simple storage approach that works in all browsers
            try {
                if (typeof(Storage) !== "undefined") {
                    localStorage.setItem('powerHabitsData', JSON.stringify(data));
                }
            } catch (e) {
                console.log('Storage not available, data will not persist');
            }
        }

        function loadData() {
            try {
                if (typeof(Storage) !== "undefined") {
                    const saved = localStorage.getItem('habitTrackerData');
                    if (saved) {
                        const data = JSON.parse(saved);
                        
                        // Restore checkbox states
                        document.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                            const key = `checkbox_${index}`;
                            if (data.checkboxes && data.checkboxes[key] !== undefined) {
                                checkbox.checked = data.checkboxes[key];
                            }
                        });
                        
                        // Restore input values
                        document.querySelectorAll('input[type="number"]').forEach((input, index) => {
                            const key = `input_${index}`;
                            if (data.inputs && data.inputs[key] !== undefined) {
                                input.value = data.inputs[key];
                            }
                        });
                        
                        updateProgress();
                        updateMeditation();
                    }
                }
            } catch (e) {
                console.log('Error loading data:', e);
            }
        }

        function exportData() {
            try {
                const data = localStorage.getItem('powerHabitsData');
                if (data) {
                    const blob = new Blob([data], {type: 'application/json'});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `power-habits-backup-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                } else {
                    alert('No data to export');
                }
            } catch (e) {
                alert('Export failed: ' + e.message);
            }
        }

        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        localStorage.setItem('habitTrackerData', JSON.stringify(data));
                        location.reload(); // Reload to apply imported data
                    } catch (error) {
                        alert('Invalid file format');
                    }
                };
                reader.readAsText(file);
            }
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.removeItem('powerHabitsData');
                location.reload();
            }
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
        }

        function createExercisePage() {
            const container = document.getElementById('exercise-days');
            container.innerHTML = '';
            
            days.forEach(day => {
                const workout = workouts[day];
                const isWeekend = ['Saturday', 'Sunday'].includes(day);
                
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                const header = `
                    <div class="day-header ${isWeekend ? 'weekend-header' : 'exercise-header'}">
                        ${day} ${workout ? `- ${workout.name} (${workout.calories} cal)` : '- Rest Day'}
                    </div>
                `;
                
                let content = '<div class="day-content">';
                
                if (workout) {
                    content += '<div class="section"><h4>Workout Exercises</h4>';
                    workout.exercises.forEach((exercise, i) => {
                        content += `<div class="item"><input type="checkbox" onchange="updateProgress(); saveData()"> ${exercise}</div>`;
                    });
                    content += '</div>';
                }
                
                content += '<div class="section"><h4>Additional Activities</h4>';
                activities.forEach((activity, i) => {
                    content += `<div class="item"><input type="checkbox" onchange="updateProgress(); saveData()"> ${activity}</div>`;
                });
                content += '</div>';
                
                content += '<div class="section"><h4>Steps Goal: 5,000 steps (170 cal)</h4>';
                content += '<input type="number" placeholder="Enter steps" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 6px;" onchange="saveData()">';
                content += '</div></div>';
                
                dayCard.innerHTML = header + content;
                container.appendChild(dayCard);
            });
        }

        function createNutritionPage() {
            const container = document.getElementById('nutrition-days');
            container.innerHTML = '';
            
            days.forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                const header = `<div class="day-header nutrition-header">${day} - Nutrition & Meal Plan</div>`;
                
                let content = '<div class="day-content">';
                content += '<div class="section"><h4>Daily Metrics (KetoMojo & CarbManager)</h4>';
                content += '<div class="metrics">';
                content += '<div class="metric"><label>Fasting Blood Glucose (mg/dL)</label><input type="number" step="0.1" placeholder="0.0" onchange="saveData()"></div>';
                content += '<div class="metric"><label>Ketones (mmol/L)</label><input type="number" step="0.1" placeholder="0.0" onchange="saveData()"></div>';
                content += '<div class="metric"><label>Total Calories</label><input type="number" placeholder="0" onchange="saveData()"></div>';
                content += '<div class="metric"><label>Net Carbs (grams)</label><input type="number" placeholder="0" onchange="saveData()"></div>';
                content += '</div></div>';
                
                content += '<div class="section"><h4>Daily Meal Plan</h4>';
                meals.forEach(meal => {
                    content += `<div class="item"><input type="checkbox" onchange="updateProgress(); saveData()"> ${meal}</div>`;
                });
                content += '</div></div>';
                
                dayCard.innerHTML = header + content;
                container.appendChild(dayCard);
            });
        }

        function createMeditationPage() {
            const container = document.getElementById('meditation-days');
            container.innerHTML = '';
            
            days.forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                const header = `<div class="day-header meditation-header">${day} - Meditation Practice</div>`;
                
                let content = '<div class="day-content">';
                content += '<div class="meditation-grid">';
                content += '<div class="meditation-item"><h4>üåÖ Morning Meditation</h4><input type="number" min="0" placeholder="0" onchange="updateMeditation(); saveData()"> minutes</div>';
                content += '<div class="meditation-item"><h4>üåô Evening Meditation</h4><input type="number" min="0" placeholder="0" onchange="updateMeditation(); saveData()"> minutes</div>';
                content += '</div></div>';
                
                dayCard.innerHTML = header + content;
                container.appendChild(dayCard);
            });
        }

        function createSelfCarePage() {
            const container = document.getElementById('selfcare-days');
            container.innerHTML = '';
            
            days.forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                const header = `<div class="day-header selfcare-header">${day} - Self Care & Wellness</div>`;
                
                let content = '<div class="day-content">';
                selfCareActivities.forEach(section => {
                    content += `<div class="section"><h4><span class="emoji">${section.emoji}</span>${section.category === 'morning' ? 'Early Morning' : section.category === 'postworkout' ? 'After Workout' : 'Evening Routine'}</h4>`;
                    section.items.forEach(item => {
                        content += `<div class="item"><input type="checkbox" onchange="updateProgress(); saveData()"> ${item}</div>`;
                    });
                    content += '</div>';
                });
                content += '</div>';
                
                dayCard.innerHTML = header + content;
                container.appendChild(dayCard);
            });
        }

        function updateProgress() {
            setTimeout(() => {
                document.querySelectorAll('.item').forEach(item => {
                    const checkbox = item.querySelector('input[type="checkbox"]');
                    if (checkbox && checkbox.checked) {
                        item.classList.add('completed');
                    } else {
                        item.classList.remove('completed');
                    }
                });

                // Exercise progress
                const exerciseChecks = document.querySelectorAll('#exercise input[type="checkbox"]');
                const exerciseCompleted = Array.from(exerciseChecks).filter(cb => cb.checked).length;
                const exerciseTotal = exerciseChecks.length;
                const exercisePercent = exerciseTotal > 0 ? Math.round((exerciseCompleted / exerciseTotal) * 100) : 0;
                
                document.getElementById('exercise-progress').style.width = exercisePercent + '%';
                document.getElementById('exercise-completed').textContent = exerciseCompleted;
                document.getElementById('exercise-total').textContent = exerciseTotal;
                document.getElementById('exercise-calories').textContent = exerciseCompleted * 20;

                // Nutrition progress
                const nutritionChecks = document.querySelectorAll('#nutrition input[type="checkbox"]');
                const nutritionCompleted = Array.from(nutritionChecks).filter(cb => cb.checked).length;
                const nutritionTotal = nutritionChecks.length;
                const nutritionPercent = nutritionTotal > 0 ? Math.round((nutritionCompleted / nutritionTotal) * 100) : 0;
                
                document.getElementById('nutrition-progress').style.width = nutritionPercent + '%';
                document.getElementById('nutrition-completed').textContent = nutritionCompleted;
                document.getElementById('nutrition-total').textContent = nutritionTotal;

                // Self care progress
                const selfcareChecks = document.querySelectorAll('#selfcare input[type="checkbox"]');
                const selfcareCompleted = Array.from(selfcareChecks).filter(cb => cb.checked).length;
                const selfcareTotal = selfcareChecks.length;
                const selfcarePercent = selfcareTotal > 0 ? Math.round((selfcareCompleted / selfcareTotal) * 100) : 0;
                
                document.getElementById('selfcare-progress').style.width = selfcarePercent + '%';
                document.getElementById('selfcare-completed').textContent = selfcareCompleted;
                document.getElementById('selfcare-total').textContent = selfcareTotal;
            }, 50);
        }

        function updateMeditation() {
            const inputs = document.querySelectorAll('#meditation input[type="number"]');
            let total = 0;
            let sessions = 0;
            
            inputs.forEach(input => {
                const value = parseInt(input.value) || 0;
                total += value;
                if (value > 0) sessions++;
            });
            
            document.getElementById('total-minutes').textContent = total;
            document.getElementById('sessions-logged').textContent = sessions;
            document.getElementById('avg-session').textContent = sessions > 0 ? Math.round(total / sessions) : 0;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            createExercisePage();
            createNutritionPage();
            createMeditationPage();
            createSelfCarePage();
            loadData(); // Load saved data after creating pages
            updateProgress();
            updateMeditation();
        });

        // Auto-save when the page is about to be closed
        window.addEventListener('beforeunload', function() {
            saveData();
        });
    </script>
</body>
</html>
